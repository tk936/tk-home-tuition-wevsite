<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TK Home Tuition | Final Master System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .panel { display: none; }
        .active { display: block; }
        .tk-dark { background: #0f172a; }
        .amazon-orange { background: #febd69; }
        .nav-btn.active-tab { color: #febd69; border-bottom: 3px solid #febd69; }
        input, select, textarea { border: 1px solid #ddd !important; padding: 10px; border-radius: 8px; width: 100%; outline: none; }
    </style>
</head>
<body class="bg-slate-50 font-sans pb-20">

    <header class="tk-dark text-white p-4 sticky top-0 z-50 flex justify-between items-center">
        <div class="flex items-center gap-2">
            <div class="bg-orange-400 p-2 rounded text-black font-black italic">TK</div>
            <h1 class="text-lg font-black italic text-orange-400 uppercase tracking-tighter">Home Tuition</h1>
        </div>
        <div class="flex items-center gap-4">
            <div class="bg-white/10 px-3 py-1 rounded flex items-center gap-2">
                <i class="fas fa-coins text-yellow-400"></i>
                <span id="nav-coins" class="font-black text-yellow-400">1250</span>
            </div>
            <button onclick="showTab('admin')" class="bg-red-600 text-white text-[10px] font-bold px-3 py-1 rounded">ADMIN</button>
        </div>
    </header>

    <div class="max-w-4xl mx-auto p-4 space-y-6">

        <div id="tab-home" class="panel active space-y-6">
            <div class="bg-blue-800 text-white p-10 rounded-[2.5rem] shadow-xl text-center">
                <h2 class="text-2xl font-black italic mb-4 uppercase underline decoration-orange-400">Jaipur No.1 Tutors</h2>
                <div class="bg-white text-gray-800 p-6 rounded-3xl space-y-4 text-left shadow-2xl">
                    <p class="text-[10px] font-black text-blue-800 uppercase italic">Step 1: Get Free Demo</p>
                    <input type="text" id="stu-name" placeholder="Student Name">
                    <div class="grid grid-cols-2 gap-2">
                        <select id="stu-class">
                            <option>Class Select Karein</option>
                            <option>1st - 12th</option>
                        </select>
                        <input type="text" id="stu-slot" placeholder="Time Slot (e.g. 5 PM)">
                    </div>
                    <textarea id="stu-addr" placeholder="Poora Address (Area in Jaipur)"></textarea>
                    <button onclick="gpsDetect()" class="bg-gray-100 py-2 rounded font-bold text-[10px] uppercase italic text-blue-700">Detect Live Location</button>
                    <button onclick="processLead()" class="amazon-orange w-full py-4 rounded-xl font-black text-black uppercase shadow-lg">Find & Submit Request</button>
                </div>
            </div>

            <div id="teacher-results" class="hidden space-y-4">
                <h3 class="font-black text-gray-700 italic px-2 uppercase text-xs">Matching Tutors in 5KM:</h3>
                <div id="t-cards" class="space-y-4"></div>
            </div>
        </div>

        <div id="tab-teacher" class="panel space-y-6">
            <div class="bg-white p-8 rounded-[2.5rem] shadow-xl border">
                <h2 class="text-xl font-black text-blue-900 italic mb-6 uppercase">Tutor Registration</h2>
                <div class="space-y-4">
                    <input type="text" id="reg-t-name" placeholder="Full Name">
                    <input type="number" id="reg-t-phone" placeholder="WhatsApp Number">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="border-2 border-dashed p-4 rounded-2xl text-center">
                            <p class="text-[9px] font-bold text-gray-400">RESUME PHOTO</p>
                            <input type="file" id="reg-t-resume" class="mt-2 text-[8px] mx-auto">
                        </div>
                        <div class="border-2 border-dashed p-4 rounded-2xl text-center">
                            <p class="text-[9px] font-bold text-gray-400">DEMO VIDEO</p>
                            <input type="file" id="reg-t-video" class="mt-2 text-[8px] mx-auto">
                        </div>
                    </div>
                    <button onclick="processTeacher()" class="w-full bg-[#0f172a] text-orange-400 py-4 rounded-2xl font-black uppercase shadow-lg">Register in TK Network</button>
                </div>
            </div>
        </div>

        <div id="tab-admin" class="panel space-y-6">
            <div class="bg-[#0f172a] text-white p-8 rounded-[2.5rem] shadow-2xl border-b-8 border-orange-400">
                <h2 class="text-2xl font-black italic text-orange-400 underline mb-6 uppercase">Tinkal's Dashboard</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="bg-white/5 p-4 rounded-2xl border border-white/10">
                        <p class="text-[9px] opacity-60">TK PROFIT</p>
                        <p class="text-xl font-black text-yellow-400" id="total-profit">₹0</p>
                    </div>
                    <div class="bg-white/5 p-4 rounded-2xl border border-white/10">
                        <p class="text-[9px] opacity-60">NEW LEADS</p>
                        <p class="text-xl font-black text-blue-400" id="lead-count">0</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-3xl shadow-xl border overflow-hidden">
                <div class="bg-gray-100 p-4 font-black text-xs italic text-gray-500 uppercase">Incoming Student Leads (Database)</div>
                <div class="overflow-x-auto">
                    <table class="w-full text-left text-[11px] font-bold italic border-collapse">
                        <thead>
                            <tr class="bg-gray-50 border-b">
                                <th class="p-4 uppercase">Student/Area</th>
                                <th class="p-4 uppercase">Slot</th>
                                <th class="p-4 uppercase">Status</th>
                                <th class="p-4 text-blue-700 underline">25% / 5% Hisab</th>
                                <th class="p-4">Action</th>
                            </tr>
                        </thead>
                        <tbody id="lead-db" class="divide-y italic font-medium">
                            <tr class="text-gray-400"><td colspan="5" class="p-10 text-center">Database empty. No leads yet.</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <div class="fixed bottom-0 left-0 right-0 bg-white border-t flex justify-around p-3 z-50 md:hidden">
        <button onclick="showTab('home')" class="nav-btn flex flex-col items-center gap-1 active-tab"><i class="fas fa-search"></i><span class="text-[9px] font-bold uppercase">Find</span></button>
        <button onclick="showTab('teacher')" class="nav-btn flex flex-col items-center gap-1 text-gray-400"><i class="fas fa-user-plus"></i><span class="text-[9px] font-bold uppercase">Join</span></button>
        <button onclick="showTab('admin')" class="nav-btn flex flex-col items-center gap-1 text-gray-400"><i class="fas fa-lock"></i><span class="text-[9px] font-bold uppercase">Admin</span></button>
    </div>

    <script>
        // --- CENTRAL DATABASE (MOCK) ---
        let studentLeads = [];
        let teacherData = [];
        let coins = 1250;
        let totalProfit = 0;

        function showTab(id) {
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
            document.getElementById('tab-' + id).classList.add('active');
            
            // UI Nav Reset
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.replace('text-blue-600', 'text-gray-400'));
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active-tab'));
            
            if(id === 'admin') syncAdmin();
        }

        function gpsDetect() {
            alert("GPS Verified: Jaipur City. Coordinates Saved to Database.");
        }

        // Student Side Logic
        function processLead() {
            const name = document.getElementById('stu-name').value;
            const slot = document.getElementById('stu-slot').value;
            const addr = document.getElementById('stu-addr').value;

            if(!name || !slot) { alert("Pehle sabhi details bharo!"); return; }

            // Save to Database
            const newLead = { name, slot, addr, date: new Date().toLocaleDateString(), fee: 5000, month: 1 };
            studentLeads.push(newLead);

            // Load 5KM Teachers
            const results = document.getElementById('teacher-results');
            const cards = document.getElementById('t-cards');
            results.classList.remove('hidden');
            cards.innerHTML = `
                <div class="bg-white p-5 rounded-3xl shadow-md border-2 border-orange-400 flex justify-between items-center">
                    <div>
                        <p class="font-black text-gray-800">Rahul Sharma (Maths)</p>
                        <p class="text-[10px] text-gray-400 font-bold italic">1.2 KM AWAY | VERIFIED ✅</p>
                    </div>
                    <button onclick="requestDone()" class="bg-blue-800 text-white px-4 py-2 rounded-xl text-[10px] font-black italic">REQUEST DEMO</button>
                </div>
            `;
            alert("Lead Saved in Database! 5KM Teachers loaded below.");
        }

        function requestDone() {
            alert("Request sent to Tinkal Bhai (Admin). WhatsApp message avoided as requested!");
            showTab('home');
        }

        // Teacher Side Logic
        function processTeacher() {
            const name = document.getElementById('reg-t-name').value;
            if(!name) { alert("Naam likho!"); return; }
            
            teacherData.push({ name, status: 'PENDING' });
            alert("Aapka Resume aur Video Admin ke paas save ho gaya hai!");
            location.reload();
        }

        // Admin Side Logic (The Database View)
        function syncAdmin() {
            const dbTable = document.getElementById('lead-db');
            const lCount = document.getElementById('lead-count');
            const pDisplay = document.getElementById('total-profit');
            
            lCount.innerText = studentLeads.length;
            dbTable.innerHTML = "";
            totalProfit = 0;

            if(studentLeads.length === 0) {
                dbTable.innerHTML = `<tr class="text-gray-400"><td colspan="5" class="p-10 text-center uppercase text-[10px] font-bold">Koi lead nahi aayi hai abhi tak.</td></tr>`;
                return;
            }

            studentLeads.forEach(lead => {
                const rate = lead.month === 1 ? 0.25 : 0.05;
                const tkCut = lead.fee * rate;
                totalProfit += tkCut;

                dbTable.innerHTML += `
                    <tr class="hover:bg-blue-50 border-b">
                        <td class="p-4 font-black text-gray-800">${lead.name}<br><span class="text-[9px] text-gray-400 font-light">${lead.addr}</span></td>
                        <td class="p-4">${lead.slot}</td>
                        <td class="p-4"><span class="bg-orange-100 text-orange-600 px-2 py-0.5 rounded text-[8px] font-black">${lead.month === 1 ? 'NEW (25%)' : 'RECUR (5%)'}</span></td>
                        <td class="p-4 text-blue-700 font-black italic">₹${tkCut}</td>
                        <td class="p-4">
                            <button onclick="window.open('https://wa.me/91XXXXXXXXXX')" class="text-green-500 text-lg"><i class="fab fa-whatsapp"></i></button>
                        </td>
                    </tr>
                `;
            });
            pDisplay.innerText = "₹" + totalProfit;
        }
    </script>
</body>
</html>
